<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Business Card Generator</title>
  <!-- Font Awesome for icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet" />
  <!-- intl-tel-input CSS for international phone input -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css" />
  <!-- Quill CSS for rich text editor -->
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
  <style>
    /* ========= Original Styles (Form, layout, etc.) ========= */
    body {
      font-family: 'Segoe UI', system-ui, sans-serif;
      margin: 0;
      padding: 1rem;
      background: #ffffff;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      position: relative;
    }
    .form-container {
      width: 100%;
      max-width: 450px;
      background: #fff;
      border-radius: 15px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.12);
      padding: 1.5rem;
      margin: 1rem;
      box-sizing: border-box;
      position: relative;
    }
    /* (Other original CSS rules from your index.html remain unchanged) */
    
    /* ========= Exclusive Offers Section Styles ========= */
    #exclusiveOffersSection {
      border-top: 2px solid #3498DB;
      margin-top: 20px;
      padding-top: 20px;
    }
    #exclusiveOffersSection h3 {
      margin-bottom: 10px;
    }
    .offer-field {
      border: 1px solid #ccc;
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 5px;
      position: relative;
    }
    .offer-field input[type="text"] {
      width: 100%;
      padding: 5px;
      margin-bottom: 5px;
    }
    .offer-details {
      display: none;
      margin-top: 5px;
    }
    .offer-details .editor-container {
      height: 150px;
    }
    .offer-details input[type="file"] {
      margin-top: 5px;
    }
    #offerStyleDropdown {
      margin-top: 15px;
    }
    #offerPreview {
      margin-top: 15px;
    }
    /* Flip Card Preview Style (based on offerstyle.html) */
    .flip-card {
      background-color: transparent;
      width: 250px;
      height: 300px;
      perspective: 1000px;
      margin: auto;
    }
    .flip-card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.6s;
      transform-style: preserve-3d;
    }
    .flip-card:hover .flip-card-inner,
    .flip-card.active .flip-card-inner {
      transform: rotateY(180deg);
    }
    .flip-card-front, .flip-card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      color: #fff;
    }
    .flip-card-front {
      background-color: #007bff;
    }
    .flip-card-back {
      background-color: #e74c3c;
      transform: rotateY(180deg);
    }
  </style>
</head>
<body>
  <!-- ========= Original Form Container ========= -->
  <div class="form-container" id="formContainer">
    <!-- Your existing form fields go here -->
    <!-- (Profile image upload, name, business info with Quill editor, etc.) -->
    <button id="generateCard">Generate Card</button>
  </div>
  
  <!-- ========= Exclusive Offers Section ========= -->
  <div id="exclusiveOffersSection">
    <h3>Exclusive Offers</h3>
    <div id="offersContainer">
      <!-- 4 Offer Fields will be created dynamically -->
    </div>
    <button type="button" id="addOfferFields">Initialize Offers Fields</button>
    
    <div id="offerStyleDropdown">
      <label for="offerStyleSelect">Select Offer Style:</label>
      <select id="offerStyleSelect">
        <option value="accordion">Accordion Offers</option>
        <option value="scroll">Horizontal Scroll Cards</option>
        <option value="tabs">Tab-Based Offers</option>
        <option value="modal">Modal Popup Offers</option>
      </select>
      <button type="button" id="previewOfferStyle">Preview Offer</button>
    </div>
    
    <div id="offerPreview">
      <!-- Generated flip card preview will appear here -->
    </div>
    
    <button type="button" id="applyOffer">Apply Exclusive Offers</button>
  </div>
  
  <!-- ========= Scripts ========= -->
  <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>
  <script>
    // ========== (Existing JS code for your form functionality would be here) ==========
    
    // ========== Exclusive Offers Script ==========
    const offersContainer = document.getElementById('offersContainer');
    const addOfferFieldsBtn = document.getElementById('addOfferFields');
    const offerPreviewDiv = document.getElementById('offerPreview');
    const previewOfferStyleBtn = document.getElementById('previewOfferStyle');
    const applyOfferBtn = document.getElementById('applyOffer');
    
    // Function to initialize 4 offer fields
    addOfferFieldsBtn.addEventListener('click', () => {
      offersContainer.innerHTML = ''; // Clear existing fields if any
      for (let i = 1; i <= 4; i++) {
        const fieldDiv = document.createElement('div');
        fieldDiv.className = 'offer-field';
        fieldDiv.innerHTML = `
          <label>Offer ${i} Title:</label>
          <input type="text" id="offerTitle${i}" placeholder="Enter offer title" />
          <button type="button" class="toggleDetails" data-index="${i}">Details</button>
          <div class="offer-details" id="offerDetails${i}">
            <div class="editor-container" id="editor${i}"></div>
            <input type="file" id="fileUpload${i}" />
          </div>
        `;
        offersContainer.appendChild(fieldDiv);
        // Initialize Quill editor for this offer's details
        let quill = new Quill('#editor' + i, { theme: 'snow' });
        // Attach toggle event for Details button
        fieldDiv.querySelector('.toggleDetails').addEventListener('click', function() {
          const detailsDiv = document.getElementById('offerDetails' + this.getAttribute('data-index'));
          detailsDiv.style.display = detailsDiv.style.display === 'block' ? 'none' : 'block';
        });
      }
    });
    
    // Function to generate flip card preview based on selected style and offers
    previewOfferStyleBtn.addEventListener('click', () => {
      // For demonstration, using the first offer's title and details for preview
      const offerTitle = document.getElementById('offerTitle1').value || 'Special Offer';
      const selectedStyle = document.getElementById('offerStyleSelect').value;
      // In a full implementation, different styles would change the markup accordingly.
      // Here, we simulate with a basic flip card preview.
      offerPreviewDiv.innerHTML = `
        <div class="flip-card" id="flipCardPreview">
          <div class="flip-card-inner">
            <div class="flip-card-front">${offerTitle}</div>
            <div class="flip-card-back">${offerTitle} Details</div>
          </div>
        </div>
      `;
      // Make the flip card clickable to toggle details
      const flipCard = document.getElementById('flipCardPreview');
      flipCard.addEventListener('click', () => {
        flipCard.classList.toggle('active');
      });
    });
    
    // On Apply, save the generated flip card preview HTML to localStorage
    applyOfferBtn.addEventListener('click', () => {
      const previewHTML = offerPreviewDiv.innerHTML;
      if (previewHTML.trim() === '') {
        alert('Please preview an offer style first.');
        return;
      }
      localStorage.setItem('exclusiveOfferHTML', previewHTML);
      alert('Exclusive Offer applied! Generate your card to see it in the Business Card.');
    });
  </script>
</body>
</html>
